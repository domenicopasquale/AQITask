(()=>{const e="0a36a564fad59ee8bd848de650b3baf9014b47f8";let a=document.querySelector("#location p"),t=document.querySelector("#quality #quality-icon"),n=document.querySelector("#quality-description p"),i=document.querySelector("#index-value p");const r=document.querySelector("#search-input"),o=document.querySelector("#search-button"),d=document.querySelector("#geo-button");o.addEventListener("click",(e=>{c(r.value),e.preventDefault()})),o.addEventListener("keypress",(e=>{c(r.value),e.preventDefault()}));const c=async o=>{try{const d=await fetch(`https://api.waqi.info/search/?token=${e}&keyword=${o}`),c=await d.json();a.innerHTML=`${r.value}<br>Stazione di `+_.get(c,"data[0].station.name"),i.innerHTML="Indice Qualità dell'Aria = "+_.get(c,"data[0].aqi"),"-"==`${c.data[0].aqi}`?(n.innerHTML="Dati non Disponibili",t.innerHTML="❌"):_.get(c,"data[0].aqi")>=0&&_.get(c,"data[0].aqi")<=50?(n.innerHTML="Ottima",t.innerHTML="🤩"):_.get(c,"data[0].aqi")>=51&&_.get(c,"data[0].aqi")<=100?(n.innerHTML="Moderata",t.innerHTML="😕"):_.get(c,"data[0].aqi")>=101&&_.get(c,"data[0].aqi")<=150?(n.innerHTML="Malsana",t.innerHTML="🥴"):_.get(c,"data[0].aqi")>=151&&_.get(c,"data[0].aqi")<=200?(n.innerHTML="Nociva",t.innerHTML="😷"):_.get(c,"data[0].aqi")>=201&&_.get(c,"data[0].aqi")<=300?(n.innerHTML="Terribile",t.innerHTML="🤮"):_.get(c,"data[0].aqi")>=300&&(n.innerHTML="Pericolosa",t.innerHTML="🤯")}catch(e){a.innerHTML=`${r.value}<br>Stazione Non Trovata`,i.innerHTML="Indice Qualità dell'Aria = Non Disponibile",t.innerHTML="❌"}};d.addEventListener("click",(r=>{let o,d;r.preventDefault(),navigator.geolocation&&navigator.geolocation.getCurrentPosition((r=>{o=r.coords.longitude,d=r.coords.latitude,fetch(`https://api.waqi.info/feed/geo:${d};${o}/?token=${e}`).then((e=>e.json())).then((e=>{a.innerHTML="Stazione di "+_.get(e,"data.city.name"),i.innerHTML="Indice Qualità dell'Aria = "+_.get(e,"data.aqi"),"-"===_.get(e,"data.aqi")?(n.innerHTML="Dati non disponibili",t.innerHTML="❌"):_.get(e,"data.aqi")>=0&&_.get(e,"data.aqi")<=50?(n.innerHTML="Ottima",t.innerHTML="🤩"):_.get(e,"data.aqi")>=51&&_.get(e,"data.aqi")<=100?(n.innerHTML="Moderata",t.innerHTML="😕"):_.get(e,"data.aqi")>=101&&_.get(e,"data.aqi")<=150?(n.innerHTML="Malsana",t.innerHTML="🥴"):_.get(e,"data.aqi")>=151&&_.get(e,"data.aqi")<=200?(n.innerHTML="Nociva",t.innerHTML="😷"):_.get(e,"data.aqi")>=201&&_.get(e,"data.aqi")<=300?(n.innerHTML="Terribile",t.innerHTML="🤮"):_.get(e,"data.aqi")>=300&&(n.innerHTML="Pericolosa",t.innerHTML="🤯")}))}))}))})();